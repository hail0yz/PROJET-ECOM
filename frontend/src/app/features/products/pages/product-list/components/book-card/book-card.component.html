<a [routerLink]="['/products', book.id]" class="block">
    <div data-slot="card"
        class="bg-card text-card-foreground flex flex-col gap-6 rounded-xl border border-gray-100 py-6 shadow-sm group transition-shadow hover:shadow-lg cursor-pointer">
        <div data-slot="card-content" class="px-3 sm:px-4">
            <div class="relative mb-3 sm:mb-4">
                <img [src]="book.thumbnail ? book.thumbnail : 'https://placehold.co/600x400?text=' + book.title"
                    [alt]="book.title" class="h-40 w-full rounded-md object-contain sm:h-48">
            </div>
            <div class="space-y-2">
                <h3 class="line-clamp-2 text-sm leading-tight font-medium">{{ book.title }}</h3>
                <div class="flex flex-wrap items-center gap-2">
                    <span class="text-base font-bold text-blue-600 sm:text-lg">{{book.price | currency:'EUR'}}</span>
                </div>
                <p class="text-sm text-gray-500">Stock :
                    <span class="font-semibold text-gray-700">{{ book.stock !== undefined ? book.stock : '0' }}</span>
                    <span *ngIf="book.stock == 0"
                        class="ml-2 inline-block px-2 py-0.5 rounded bg-red-100 text-red-700 text-xs font-semibold">Rupture
                        de stock</span>
                    <span *ngIf="isInCart()"
                        class="ml-2 inline-block px-2 py-0.5 rounded bg-blue-100 text-blue-700 text-xs font-semibold">Dans
                        le panier</span>
                </p>

                <div class="flex gap-2 pt-2">
                    <button (click)="$event.preventDefault(); $event.stopPropagation(); addToCart()"
                        [disabled]="isInCart() || book.stock == 0"
                        class="cursor-pointer inline-flex items-center justify-center whitespace-nowrap text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive bg-primary text-primary-foreground shadow-xs hover:bg-primary/90 h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5 flex-1">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                            class="lucide lucide-shopping-cart mr-1 h-4 w-4 sm:mr-2">
                            <circle cx="8" cy="21" r="1"></circle>
                            <circle cx="19" cy="21" r="1"></circle>
                            <path d="M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12">
                            </path>
                        </svg>
                        <span class="inline">
                            {{ isInCart() ? 'Dans le panier' : book.stock == 0 ? 'Rupture de stock' : 'Ajouter au
                            panier' }}
                        </span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</a>